<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Edytowanie twojego CV</title>
    <link rel="stylesheet" href="edit.css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600&display=swap" rel="stylesheet">
  </head>
  <body>
    <div id="menu">
      <div class="kategoria-menu">
        <p style="color: grey">EDYCJA</p>
      </div>
      <div class="options">
        <div class="option">
          <p>Marginesy</p>
          <input class="slider" type="range" value="3" min="1" max="5" step=".25" oninput=gap(value)>
        </div>
        <div class="option">
          <p>Odstępy</p>
          <input class="slider" type="range" value=".75" min="0" max="1.75" step=".25" oninput=margin(value)>
        </div>
        <div class="option">
          <p>Rozmiar tekstu</p>
          <input class="slider" type="range" value=".875" min=".7" max="1.2" step=".025" oninput=textsize(value)>
        </div>
      </div>
      <div class="kategoria-menu">
        <p style="color: grey; margin-top: 2rem;">KOLORY</p>
      </div>
      <!-- NOTE: KOLORY -->
      <div style="display: flex; gap: 1rem; flex-wrap: wrap" id="kolory">
        <div style="border: 1px solid black; border-radius: 1rem; cursor: pointer" class="kolor" id="kolor1">
          <div style="width: 1rem; height: .5rem; background: black; border-top-right-radius: 1rem; border-top-left-radius: 1rem; " id="czarne"></div>
          <div style="width: 1rem; height: .5rem; background: white;  border-bottom-right-radius: 1rem; border-bottom-left-radius: 1rem;" id="biale"></div>
        </div>

        <div style="border: 1px solid black; border-radius: 1rem; cursor: pointer" class="kolor" id="kolor2">
          <div style="width: 1rem; height: .5rem; background: #5F769A; border-top-right-radius: 1rem; border-top-left-radius: 1rem; " id="czarne"></div>
          <div style="width: 1rem; height: .5rem; background: white;  border-bottom-right-radius: 1rem; border-bottom-left-radius: 1rem;" id="biale"></div>
        </div>

        <div style="border: 1px solid black; border-radius: 1rem; cursor: pointer" class="kolor" id="kolor3">
          <div style="width: 1rem; height: .5rem; background: #F26D3D; border-top-right-radius: 1rem; border-top-left-radius: 1rem; " id="czarne"></div>
          <div style="width: 1rem; height: .5rem; background: white;  border-bottom-right-radius: 1rem; border-bottom-left-radius: 1rem;" id="biale"></div>
        </div>
      </div>

      <div class="kategoria-menu">
        <p style="color: grey; margin-top: 2rem;">EKSPORTUJ</p>
      </div>
      <div id="dwnbutton">
        <img class="btn-download" id="dwnico" src="download_icon.png" alt="">
      </div>
    </div>
    <script>
      var r = document.querySelector(':root');

      function gap(value){
        r.style.setProperty("--resume-margin", value + "rem");
      };

      function margin(value){
        r.style.setProperty("--resume-text-margin", value + "rem");
      };

      function textsize(value){
        r.style.setProperty("--resume-text-size", value + "rem");
      };
    </script>
    <div id="resume-content">
      <div id="resume">
        <div id="resumedwn">
          <div id="sekcje">

              <p id="imieinazwisko">Jan Kowalski</p>
              <div id="contact">
                <p>Warszawa, ul. Warszawska</p>
                <p>jankowalski@kontakt.pl</p>
                <p>+48696421200</p>
              </div>

            <h1>Doświadczenie</h1>
            <div class="sekcja" id="experience">
              <div id="experience-list">
                <div class="experience-list-position">
                  <p class="zakres">2018 - obecnie</p>
                  <p>Główny księgowy Mlekovita</p>
                </div>
                <div class="add">+</div>
              </div>
            </div>
            <h1>Wykształcenie</h1>
            <div class="sekcja" id="learn">
              <div id="learn-list">
                <div class="learn-list-position">
                  <p class="zakres">1995-1998</p>
                  <p>Liceum nr.I im. Adama Mickiewicza w Elblągu</p>
                </div>
                <div class="add">+</div>
              </div>
            </div>
            <h1>Umiejętności</h1>
            <div class="sekcja" id="skills">
              <p>Umiem grać na gitarze</p>
              <div class="add">+</div>
            </div>
            <h1>Znajomość języków obcych</h1>
            <div class="sekcja" id="languages">
              <p>Znajomość języka angielskiego na poziomie A2</p>
              <div class="add">+</div>
            </div>
            <h1>Zainteresowania</h1>
            <div class="sekcja" id="interest">
              <p>Grafika komputerowa, programowanie, muzyka</p>
              <div class="add">+</div>
            </div>
          </div>
          <div id="rest">
            <p id="zgoda">Wyrażam zgodę na przetwarzanie moich danych osobowych w celu rekrutacji na aplikowane przeze mnie stanowisko.</p>
          </div>
        </div>
        </div>
    </div>
    <script>
      $('#resume p')
        .css('cursor', 'pointer')
        .click(
          function(){
           entertext(this);
          }
        )
        .hover(
          function(){
            $(this).css('background', '#B4C8E6');
          },
          function(){
            $(this).css('background', '');
          }
        );

        function entertext(ktorasekcja) {
          let text;
          let person = prompt("Wpisz tekst:", $(ktorasekcja).html());
          if (person == null || person == "") {
            return false;
          } else {
            text = person;
          }
          $(ktorasekcja).html(person);
          console.log(ktorasekcja);
        };


        $('.add')
          .click(
            function(){
             newinfo(this)
            }
          );

          function newinfo(ktorasekcja) {
          if ($(ktorasekcja).closest("#experience-list").length >= 1){
            let zakres = prompt("Wpisz tekst:", "zakres");
            let text;
            let person = prompt("Wpisz tekst:", "doświadczenie");
            if (person == null || person == "") {
              return false;
            } else {
              text = person;
            }
            $(ktorasekcja).parent().append("<div class='experience-list-position appended'>" + "<p class='zakres'>" + zakres + "</p>" + "<p>" + person + "</p>" + "</div>");
          }
          else if ($(ktorasekcja).closest("#learn-list").length >= 1){
            let zakres = prompt("Wpisz tekst:", "zakres");
            let text;
            let person = prompt("Wpisz tekst:", "szkoła");
            if (person == null || person == "") {
              return false;
            } else {
              text = person;
            }
            $(ktorasekcja).parent().append("<div class='experience-list-position appended'>" + "<p class='zakres'>" + zakres + "</p>" + "<p>" + person + "</p>" + "</div>");
          }
          else{

            let text;
            let person = prompt("Wpisz tekst:", "");
            if (person == null || person == "") {
              return false;
            } else {
              text = person;
            }
            $(ktorasekcja).parent().append("<p class='appended'>" + person + "</p>")
          };
};
          $('.sekcja').on("click", '.appended', function(){
            $(this).remove();
          });

          var r = document.querySelector(':root');

          $('#kolor1')
            .click(
              function(){
                r.style.setProperty("--resume-h1-color", "black")
                r.style.setProperty("--resume-imieinazwisko-color", "black")
              }
            );
          $('#kolor2')
            .click(
              function(){
                r.style.setProperty("--resume-h1-color", "#5F769A")
                r.style.setProperty("--resume-imieinazwisko-color", "#303C4E")
              }
            );
          $('#kolor3')
            .click(
              function(){
                r.style.setProperty("--resume-h1-color", "#593122")
                r.style.setProperty("--resume-imieinazwisko-color", "#F26D3D")
              }
            );
    </script>

    <script>
    const options = {
      margin: 0,
      filename: 'moje-cv.pdf',
      image: {
        type: 'jpeg',
        quality: 500
      },
      html2canvas: {
        scale: 2
      },
      jsPDF: {
        unit: 'in',
        format: 'letter',
        orientation: 'portrait'
      }
    }

    $('.btn-download').click(function(e){
      e.preventDefault();
      const element = document.getElementById('resumedwn');
      html2pdf().from(element).set(options).save();
    });

    </script>
  </body>
</html>
